{
    "instance_id": "matplotlib__matplotlib-20859",
    "agent": "20241221_codestory_midwit_claude-3-5-sonnet_swe-search",
    "agent_patch": {
        "lib/matplotlib/legend.py": "index 44ab024698..01de340404 100644\n         \"\"\"\n         # local import only to avoid circularity\n         from matplotlib.axes import Axes\nfrom matplotlib.figure import Figure, FigureBase\n \n         super().__init__()\n \n             self.isaxes = True\n             self.axes = parent\n             self.set_figure(parent.figure)\nelif isinstance(parent, (Figure, FigureBase)):\n             self.isaxes = False\n             self.set_figure(parent)\n         else:\nraise TypeError(\"Legend needs either Axes or Figure/FigureBase as parent\")\n         self.parent = parent\n \n         self._loc_used_default = loc is None\n",
        "reproduce_error.py": "new file mode 100644\nindex 0000000000..8de34e1abd\nimport matplotlib.pyplot as plt\n\nsubfig = plt.figure().subfigures()\nax = subfig.subplots()\nax.plot([0, 1, 2], [0, 1, 2], label=\"test\")\nsubfig.legend()\nplt.show()\n\\ No newline at end of file\n"
    },
    "ground_truth_patch": {
        "lib/matplotlib/legend.py": "         \"\"\"\n         # local import only to avoid circularity\n         from matplotlib.axes import Axes\nfrom matplotlib.figure import FigureBase\n \n         super().__init__()\n \n             self.isaxes = True\n             self.axes = parent\n             self.set_figure(parent.figure)\nelif isinstance(parent, FigureBase):\n             self.isaxes = False\n             self.set_figure(parent)\n         else:\nraise TypeError(\n\"Legend needs either Axes or FigureBase as parent\"\n)\n         self.parent = parent\n \n         self._loc_used_default = loc is None\n"
    },
    "response": "{\"explanation\": \"The code in code sample 1 includes a constructor for a legend that sets some properties related to its parent, checks the type of parent to determine if it's an Axes or a Figure, and raises an error if the type is neither. It also sets a flag to denote whether it's associated with axes and tracks whether a default location is used. The code in code sample 2 is nearly identical but has a minor difference where the type check for the parent is slightly different (it checks only for FigureBase). Both samples contain the same structure and function, with only alterations in whitespace and the modification of a type check. \", \"is_clone\": true, \"classification\": \"type-2\", \"reasoning\": \"These code samples are type-2 clones because they are identical except for differences in a specific identifier (the parent type check) and whitespace.\"}"
}