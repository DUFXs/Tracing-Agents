{
    "instance_id": "django__django-12193",
    "agent": "20241221_codestory_midwit_claude-3-5-sonnet_swe-search",
    "agent_patch": {
        "django/forms/widgets.py": "index 6fe220bea7..0b25787ebc 100644\n \n     def get_context(self, name, value, attrs):\n         if self.check_test(value):\nattrs = {} if attrs is None else attrs.copy()\n             attrs['checked'] = True\n         return super().get_context(name, value, attrs)\n \n",
        "reproduce_error.py": "new file mode 100644\nindex 0000000000..6ff93ed96a\nimport django\nfrom django.conf import settings\nfrom django.forms import BooleanField, Form, MultiValueField, MultiWidget\n\n# Configure Django settings\nif not settings.configured:\nsettings.configure(\nUSE_I18N=True,\nUSE_L10N=True,\nUSE_TZ=True,\nDATABASES={},\nINSTALLED_APPS=['django.contrib.contenttypes'],\nLANGUAGE_CODE='en-us',\n)\ndjango.setup()\n\nclass BooleanArrayWidget(MultiWidget):\ndef __init__(self, size, attrs=None):\nwidgets = [BooleanField().widget for _ in range(size)]\nsuper().__init__(widgets, attrs)\n\ndef decompress(self, value):\nif value:\nreturn value\nreturn [None] * len(self.widgets)\n\nclass BooleanArrayField(MultiValueField):\ndef __init__(self, size=3, **kwargs):\nfields = [BooleanField(required=False) for _ in range(size)]\nwidget = BooleanArrayWidget(size)\nsuper().__init__(fields, widget=widget, require_all_fields=False, **kwargs)\n\ndef compress(self, data_list):\nreturn data_list\n\nclass TestForm(Form):\nbool_array = BooleanArrayField()\n\n# Create a form with initial data where some values are True and others are False\nform = TestForm(initial={'bool_array': [True, False, False]})\n\n# Get the rendered HTML to show the issue\nhtml = form.as_p()\nprint(\"Form HTML output:\")\nprint(html)\n\n# The issue is that all checkboxes after the first True will be checked\n# even though their values are False in the initial data\n\\ No newline at end of file\n"
    },
    "ground_truth_patch": {
        "django/forms/widgets.py": " \n     def get_context(self, name, value, attrs):\n         if self.check_test(value):\nattrs = {**(attrs or {}), 'checked': True}\n         return super().get_context(name, value, attrs)\n \n     def value_from_datadict(self, data, files, name):\n"
    },
    "response": "{\"explanation\": \"The code in code sample 1 defines a form setup using Django's forms framework, specifically creating a custom widget (BooleanArrayWidget) for handling an array of boolean values. It includes a method for rendering the form and handling initial data. The class includes methods for decompressing data and compressing form input. In contrast, the code in code sample 2 shows a method from the same widget that generates a context for rendering the widget. It also indicates a modification to how attributes are handled with a more concise dictionary unpacking technique. The second sample also introduces an additional method, value_from_datadict. \", \"is_clone\": false, \"classification\": \"N/A\", \"reasoning\": \"These code samples are not clones because while they share some similarities in handling form contexts, code sample 1 is more extensive and has different functionality (like the widget creation and compression methods), making them functionally dissimilar.\"}"
}