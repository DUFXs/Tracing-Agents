{
    "instance_id": "django__django-14855",
    "agent": "20250117_wandb_programmer_o1_crosscheck5",
    "agent_patch": {
        "app_test/__init__.py": "new file mode 100644\nindex 0000000000..a5d59a1600\n# Marks this directory as a Python package\n",
        "app_test/admin.py": "new file mode 100644\nindex 0000000000..7c2fcec0a2\nfrom django.contrib import admin\nfrom .models import Employee, Department\n\nmy_custom_admin_site = admin.AdminSite(name='my_custom_admin_site')\n\nclass EmployeeAdmin(admin.ModelAdmin):\nreadonly_fields = ('department',)\n\n# Also register Department so that get_admin_url() succeeds.\nmy_custom_admin_site.register(Department)\nmy_custom_admin_site.register(Employee, EmployeeAdmin)\n",
        "app_test/apps.py": "new file mode 100644\nindex 0000000000..fd37bf96ee\nfrom django.apps import AppConfig\n\nclass AppTestConfig(AppConfig):\nname = \"app_test\"\n",
        "app_test/models.py": "new file mode 100644\nindex 0000000000..e1e4031a4c\nfrom django.db import models\n\nclass Department(models.Model):\nname = models.CharField(max_length=100)\n\ndef __str__(self):\nreturn self.name\n\nclass Employee(models.Model):\nname = models.CharField(max_length=100)\ndepartment = models.ForeignKey(Department, on_delete=models.CASCADE)\n\ndef __str__(self):\nreturn self.name\n",
        "django/contrib/admin/helpers.py": "index dd154f72ee..b2717cb5b0 100644\n             remote_field.model._meta.model_name,\n         )\n         try:\nurl = reverse(\nurl_name,\nargs=[quote(remote_obj.pk)],\ncurrent_app=self.model_admin.admin_site.name,\n)\n             return format_html('<a href=\"{}\">{}</a>', url, remote_obj)\n         except NoReverseMatch:\n             return str(remote_obj)\n\n \n     def contents(self):\n         from django.contrib.admin.templatetags.admin_list import _boolean_icon\n",
        "migrations/0001_initial.py": "new file mode 100644\nindex 0000000000..ac00888f9f\n# Generated by Django 4.0.dev20210917181926 on 2025-01-13 02:44\n\nfrom django.db import migrations, models\nimport django.db.models.deletion\n\n\nclass Migration(migrations.Migration):\n\ninitial = True\n\ndependencies = [\n]\n\noperations = [\nmigrations.CreateModel(\nname='Foo',\nfields=[\n('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n('name', models.CharField(max_length=100)),\n('bar', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='app_test.foo')),\n],\n),\n]\n",
        "migrations/__init__.py": "new file mode 100644\nindex 0000000000..e69de29bb2\n",
        "test_custom_admin_url.py": "new file mode 100644\nindex 0000000000..276b000d0d\nimport sys\nfrom django.conf import settings\n\ndef configure_django():\nsettings.configure(\nSECRET_KEY='test_secret',\nDEBUG=True,\nALLOWED_HOSTS=['*'],\nROOT_URLCONF='test_custom_admin_url_urls',\nINSTALLED_APPS=[\n'django.contrib.admin',\n'django.contrib.auth',\n'django.contrib.contenttypes',\n'django.contrib.sessions',\n'app_test.apps.AppTestConfig'\n],\nMIDDLEWARE=[\n'django.contrib.sessions.middleware.SessionMiddleware',\n'django.contrib.auth.middleware.AuthenticationMiddleware'\n],\nDATABASES={\n'default': {\n'ENGINE': 'django.db.backends.sqlite3',\n'NAME': ':memory:'\n}\n},\nTEMPLATES=[\n{\n'BACKEND': 'django.template.backends.django.DjangoTemplates',\n'APP_DIRS': True,\n'OPTIONS': {}\n}\n]\n)\n\ndef main():\nprint('Starting test...')\nimport django\nconfigure_django()\ndjango.setup()\n\nfrom django.core.management import call_command\nfrom django.contrib.auth.models import User\nfrom django.test import Client\nfrom app_test.models import Department, Employee\n\n# Migrate and create a superuser\nprint('Running migrations...')\ncall_command('migrate', interactive=False, run_syncdb=True)\nprint('Creating superuser...')\nUser.objects.create_superuser('admin', 'admin@example.com', 'admin')\n\n# Create test objects\nprint('Creating Department and Employee...')\ndept = Department.objects.create(name='Dept1')\nemp = Employee.objects.create(name='Emp1', department=dept)\n\n# Log in with Client\nprint('Logging in...')\nc = Client()\nlogged_in = c.login(username='admin', password='admin')\nprint('Logged in:', logged_in)\n\n# Retrieve the Employee change form\nemp_change_url = f'/myadmin/app_test/employee/{emp.pk}/change/'\nprint('Fetching:', emp_change_url)\nresponse = c.get(emp_change_url)\nprint('Response status code:', response.status_code)\n\nbody = response.content.decode('utf-8', errors='replace')\nwith open('test_custom_admin_url_response.html', 'w', encoding='utf-8') as f:\nf.write(body)\n\nexpected_link = f'/myadmin/app_test/department/{dept.pk}/change/'\nif expected_link in body:\nprint('Test passed. Found link:', expected_link)\nsys.exit(0)\nelse:\nprint('Test failed.')\nprint('Expected link not found:', expected_link)\nprint('Body content written to test_custom_admin_url_response.html')\nsys.exit(1)\n\nif __name__ == '__main__':\nmain()\n",
        "test_custom_admin_url_response.html": "new file mode 100644\nindex 0000000000..74051bc70b\n<!DOCTYPE html>\n\n<html lang=\"en-us\" dir=\"ltr\">\n<head>\n<title>Emp1 | Change employee | Django site admin</title>\n<link rel=\"stylesheet\" type=\"text/css\" href=\"admin/css/base.css\">\n\n<link rel=\"stylesheet\" type=\"text/css\" href=\"admin/css/nav_sidebar.css\">\n<script src=\"admin/js/nav_sidebar.js\" defer></script>\n\n<link rel=\"stylesheet\" type=\"text/css\" href=\"admin/css/forms.css\">\n\n\n<script src=\"/myadmin/jsi18n/\"></script>\n<script src=\"admin/js/vendor/jquery/jquery.js\"></script>\n<script src=\"admin/js/jquery.init.js\"></script>\n<script src=\"admin/js/core.js\"></script>\n<script src=\"admin/js/admin/RelatedObjectLookups.js\"></script>\n<script src=\"admin/js/actions.js\"></script>\n<script src=\"admin/js/urlify.js\"></script>\n<script src=\"admin/js/prepopulate.js\"></script>\n<script src=\"admin/js/vendor/xregexp/xregexp.js\"></script>\n\n\n<meta name=\"viewport\" content=\"user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"admin/css/responsive.css\">\n\n\n<meta name=\"robots\" content=\"NONE,NOARCHIVE\">\n</head>\n\n<body class=\" app-app_test model-employee change-form\"\ndata-admin-utc-offset=\"-21600\">\n\n<!-- Container -->\n<div id=\"container\">\n\n\n<!-- Header -->\n\n<div id=\"header\">\n<div id=\"branding\">\n\n<h1 id=\"site-name\"><a href=\"/myadmin/\">Django administration</a></h1>\n\n</div>\n\n\n<div id=\"user-tools\">\n\nWelcome,\n<strong></strong>.\n\n\n\n<a href=\"/\">View site</a> /\n\n\n\n<a href=\"/myadmin/logout/\">Log out</a>\n\n</div>\n\n\n\n</div>\n\n<!-- END Header -->\n\n<div class=\"breadcrumbs\">\n<a href=\"/myadmin/\">Home</a>\n&rsaquo; <a href=\"/myadmin/app_test/\">App_Test</a>\n&rsaquo; <a href=\"/myadmin/app_test/employee/\">Employees</a>\n&rsaquo; Emp1\n</div>\n\n\n\n<div class=\"main\" id=\"main\">\n\n\n\n<button class=\"sticky toggle-nav-sidebar\" id=\"toggle-nav-sidebar\" aria-label=\"Toggle navigation\"></button>\n<nav class=\"sticky\" id=\"nav-sidebar\">\n<input type=\"search\" id=\"nav-filter\"\nplaceholder=\"Start typing to filter...\"\naria-label=\"Filter navigation items\">\n\n\n\n\n<div class=\"app-app_test module\">\n<table>\n<caption>\n<a href=\"/myadmin/app_test/\" class=\"section\" title=\"Models in the App_Test application\">App_Test</a>\n</caption>\n\n<tr class=\"model-department\">\n\n<th scope=\"row\"><a href=\"/myadmin/app_test/department/\">Departments</a></th>\n\n\n\n<td><a href=\"/myadmin/app_test/department/add/\" class=\"addlink\">Add</a></td>\n\n\n\n</tr>\n\n<tr class=\"model-employee\">\n\n<th scope=\"row\"><a href=\"/myadmin/app_test/employee/\">Employees</a></th>\n\n\n\n<td><a href=\"/myadmin/app_test/employee/add/\" class=\"addlink\">Add</a></td>\n\n\n\n</tr>\n\n</table>\n</div>\n\n\n\n</nav>\n\n\n\n<div class=\"content\">\n\n\n\n<!-- Content -->\n<div id=\"content\" class=\"colM\">\n\n<h1>Change employee</h1>\n<h2>Emp1</h2>\n<div id=\"content-main\">\n\n\n<ul class=\"object-tools\">\n\n\n\n<li>\n\n<a href=\"/myadmin/app_test/employee/1/history/\" class=\"historylink\">History</a>\n</li>\n\n\n\n\n</ul>\n\n\n<form method=\"post\" id=\"employee_form\" novalidate><input type=\"hidden\" name=\"csrfmiddlewaretoken\" value=\"Gg7TZatPrxaFBpnl8pzRH0vxbSahKXcNZi1C9xD5gCC16kcHR8IpdWDq6wXAB2xn\">\n<div>\n\n\n\n\n\n\n\n<fieldset class=\"module aligned \">\n\n\n\n<div class=\"form-row field-name\">\n\n\n<div>\n\n\n<label class=\"required\" for=\"id_name\">Name:</label>\n\n<input type=\"text\" name=\"name\" value=\"Emp1\" class=\"vTextField\" maxlength=\"100\" required id=\"id_name\">\n\n\n\n</div>\n\n</div>\n\n<div class=\"form-row field-department\">\n\n\n<div>\n\n\n<label>Department:</label>\n\n<div class=\"readonly\"><a href=\"/myadmin/app_test/department/1/change/\">Dept1</a></div>\n\n\n\n</div>\n\n</div>\n\n</fieldset>\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"submit-row\">\n\n<input type=\"submit\" value=\"Save\" class=\"default\" name=\"_save\">\n\n\n<p class=\"deletelink-box\"><a href=\"/myadmin/app_test/employee/1/delete/\" class=\"deletelink\">Delete</a></p>\n\n\n<input type=\"submit\" value=\"Save and add another\" name=\"_addanother\">\n<input type=\"submit\" value=\"Save and continue editing\" name=\"_continue\">\n\n\n</div>\n\n\n\n<script id=\"django-admin-form-add-constants\"\nsrc=\"admin/js/change_form.js\"\n\nasync>\n</script>\n\n\n\n\n<script id=\"django-admin-prepopulated-fields-constants\"\nsrc=\"admin/js/prepopulate_init.js\"\ndata-prepopulated-fields=\"[]\">\n</script>\n\n\n</div>\n</form></div>\n\n\n<br class=\"clear\">\n</div>\n<!-- END Content -->\n<div id=\"footer\"></div>\n</div>\n</div>\n</div>\n<!-- END Container -->\n</body>\n</html>\n",
        "test_custom_admin_url_urls.py": "new file mode 100644\nindex 0000000000..f0be69fa7f\nfrom django.urls import path\nfrom app_test.admin import my_custom_admin_site\n\nurlpatterns = [\npath('myadmin/', my_custom_admin_site.urls),\n]\n"
    },
    "ground_truth_patch": {
        "django/contrib/admin/helpers.py": "             remote_field.model._meta.model_name,\n         )\n         try:\nurl = reverse(\nurl_name,\nargs=[quote(remote_obj.pk)],\ncurrent_app=self.model_admin.admin_site.name,\n)\n             return format_html('<a href=\"{}\">{}</a>', url, remote_obj)\n         except NoReverseMatch:\n             return str(remote_obj)\n"
    },
    "response": "{\"is_clone\": true, \"classification\": \"type-1\", \"reasoning\": \"These code samples are type-1 clones because they are identical except for whitespace differences. The structure and content within the specified lines remain the same, with no changes in comments, identifiers, or literal values.\"}"
}